<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ö–æ—Ç–ë–∞–Ω–∫ WORLD ‚Äî –æ–±—â–∏–π –±–∞–Ω–∫</title>
  <style>
    body{font-family:Segoe UI,Arial;margin:0;background:linear-gradient(120deg,#eef2ff,#f9fafb)}
    header{background:linear-gradient(90deg,#22c55e,#3b82f6);color:#fff;padding:18px;text-align:center;font-size:22px;font-weight:700}
    .container{padding:16px;max-width:1100px;margin:0 auto}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .box{background:#fff;border-radius:16px;padding:16px;box-shadow:0 8px 20px rgba(0,0,0,.08)}
    input,select{width:100%;padding:10px;margin-bottom:10px;border-radius:10px;border:1px solid #ddd}
    button{padding:10px 12px;border:none;border-radius:12px;background:#3b82f6;color:#fff;cursor:pointer}
    button.warn{background:#ef4444}
    .card{border:2px dashed #3b82f6;border-radius:14px;padding:12px;margin-bottom:12px}
    .money{font-weight:700}
    @media(max-width:800px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
<header>üåç –ö–æ—Ç–ë–∞–Ω–∫ WORLD (–æ–±—â–∏–π)</header>
<div class="container">
  <div class="grid">
    <div class="box">
      <h3>‚ûï –ù–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞</h3>
      <input id="name" placeholder="–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞">
      <input id="shop" placeholder="–ú–∞–≥–∞–∑–∏–Ω">
      <input id="discount" placeholder="–°–∫–∏–¥–∫–∞ %" type="number">
      <button onclick="addCard()">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>
    <div class="box">
      <h3>üí≥ –í—Å–µ –∫–∞—Ä—Ç—ã (–≤–∏–¥—è—Ç –≤—Å–µ)</h3>
      <div id="cards"></div>
    </div>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
/*
–®–ê–ì –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô ‚ùó
1) –ó–∞–π–¥–∏ –Ω–∞ https://console.firebase.google.com
2) –°–æ–∑–¥–∞–π –ø—Ä–æ–µ–∫—Ç (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
3) –î–æ–±–∞–≤—å Web App
4) –°–∫–æ–ø–∏—Ä—É–π –∫–æ–Ω—Ñ–∏–≥ —Å—é–¥–∞
*/
const firebaseConfig = {
  apiKey: "AIzaSyA9X-bRHmAgMcGqul2M06kRQzRj7AgVWr8",
  authDomain: "bank-61db9.firebaseapp.com",
  databaseURL: "https://bank-61db9-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "bank-61db9",
  storageBucket: "bank-61db9.firebasestorage.app",
  messagingSenderId: "298674400316",
  appId: "1:298674400316:web:a615d5ee635be2d9dba739",
  measurementId: "G-HGNDB3NHTY"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const cardsRef = db.ref('cards');
const cardsEl = document.getElementById('cards');

function renderCard(id,data){
  const div=document.createElement('div');
  div.className='card';
  div.innerHTML=`<strong>${data.name}</strong><br>
  –ú–∞–≥–∞–∑–∏–Ω: ${data.shop}<br>
  –°–∫–∏–¥–∫–∞: ${data.discount}%<br>
  –ë–∞–ª–∞–Ω—Å: <span class="money">${data.balance}</span> ‚ÇΩ<br>
  <button onclick="addMoney('${id}',10)">+10</button>
  <button onclick="takeMoney('${id}',10)">-10</button>
  <button class="warn" onclick="removeCard('${id}')">–£–¥–∞–ª–∏—Ç—å</button>`;
  return div;
}

function loadCards(){
  cardsRef.on('value',snap=>{
    cardsEl.innerHTML='';
    snap.forEach(c=>{
      cardsEl.appendChild(renderCard(c.key,c.val()));
    });
  });
}

function addCard(){
  const name=name.value, shop=shop.value, discount=discount.value;
  if(!name||!shop||!discount){alert('–ó–∞–ø–æ–ª–Ω–∏ –≤—Å—ë');return}
  cardsRef.push({name,shop,discount,balance:0});
  document.getElementById('name').value='';
  document.getElementById('shop').value='';
  document.getElementById('discount').value='';
}

function addMoney(id,amt){ cardsRef.child(id).once('value',s=>{ cardsRef.child(id).update({balance:(s.val().balance||0)+amt});}); }
function takeMoney(id,amt){ cardsRef.child(id).once('value',s=>{ const b=s.val().balance||0; if(b>=amt) cardsRef.child(id).update({balance:b-amt});}); }
function removeCard(id){ if(confirm('–£–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç—É?')) cardsRef.child(id).remove(); }

loadCards();
</script>
</body>
</html>